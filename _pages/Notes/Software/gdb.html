<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-67949307-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <!-- <title>Using GDB Debugger &mdash; RDU-Wiki 1.0 documentation</title> -->
    <title>Using GDB Debugger</title>
    
    <link rel="stylesheet" href="../../../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Dancing+Script:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Courgette' rel='stylesheet' type='text/css'>
    
    <div class="rduhome"  role="contentinfo">
		 <a href="http://rdu.im" style="font-family: 'Courgette', serif;" >Return to Ruixiang's Home Page</a>
	</div>
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="top" title="RDU-Wiki 1.0 documentation" href="../../../index.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body role="document">

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <!-- <li class="nav-item nav-item-0"><a href="../../../index.html">RDU-Wiki 1.0 documentation</a> &raquo;</li> -->
        <li class="nav-item nav-item-0"><a href="../../../index.html">Main Page</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="using-gdb-debugger">
<h1>Using GDB Debugger<a class="headerlink" href="#using-gdb-debugger" title="Permalink to this headline">¶</a></h1>
<p>GDB debugger can be a very powerful tool for finding the cause of unexpected behaviors of your program. In a GDB debugging session, you can step your code by line or by instruction and you can also stop your code at a specific line, a function or an address. When your program stops, you can check the values of the variables at that moment. You can even change a variable as you want. Moreover, it allows you to check the status of the stack and inspect how the function are called. The use of GDB may seem not to be as easy as printf() but it can be much more helpful when you’re trying to find a deeply hidden bug. Actually it’s not as difficut to learn as it seems to be.</p>
<p>Here are a few good tutorials to get started:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf">GDB Tutorial: A Walkthrough with Examples</a></li>
<li><a class="reference external" href="http://www.dirac.org/linux/gdb/index.php">Using GNU’s GDB Debugger</a></li>
<li><a class="reference external" href="http://heather.cs.ucdavis.edu/~matloff/UnixAndC/CLanguage/Debug.html">Guide to Faster, Less Frustrating Debugging</a></li>
<li><a class="reference external" href="http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html">RMS’s GDB Debugger Tutorial</a></li>
<li><a class="reference external" href="http://www.delorie.com/gnu/docs/gdb/gdb_toc.html">Debugging with GDB</a></li>
</ul>
<p>The official manual of GDB can be a good reference after you have already learned the basics and want to check more details of a feature:</p>
<ul class="simple">
<li><a class="reference external" href="https://sourceware.org/gdb/current/onlinedocs/gdb/">GDB Online Manual</a></li>
</ul>
<p>The following are my notes for quick reference of the most frequently used commands. Some of them are from the above materials.</p>
<div class="section" id="background-knowledge">
<h2>Background Knowledge<a class="headerlink" href="#background-knowledge" title="Permalink to this headline">¶</a></h2>
<p>It can be very helpful to understand stack and stack frames when you use GDB for debugging. This <a class="reference external" href="http://www.dirac.org/linux/gdb/02a-Memory_Layout_And_The_Stack.php#wherearewegoingtogo">page</a> from the tutorial “Using GNU’s GDB Debugger” gives good explanation about them.</p>
<p>Briefly speaking, stack is a section of the memory and whenever there is a function call, a stack frame is created in the stack. This stack frame is used to store all related information about this call including the all the <a class="reference external" href="http://en.wikipedia.org/wiki/Automatic_variable">automatic variables</a> of the newly called function, the return address and the arguments of the called function. In GDB, you can check how the functions are called from each other by inspecting the stack frames. By switching to a stack frame, you get access to variables in that scope, meaning you can check the values of local variables in the corresponding function. You cannot print or modify a variable if that variable doesn’t exit in the current stack frame.</p>
<p>In addition to stack and stack frames, check section <a class="reference internal" href="../../Knowledge-Base/Programming/Programming.html#operating-system"><span class="std std-ref">IV. Reference Materials</span></a> for more information about virtual memory and memory layout.</p>
<p>Another thing that you need to remember before starting a gdb debugging session is that you need to use “-g” flag when compiling your code to include debugging information in the generated executable file.</p>
</div>
<div class="section" id="frequently-used-commands">
<h2>Frequently Used Commands<a class="headerlink" href="#frequently-used-commands" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Starting a debugging session</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gdb &lt;name-of-executable&gt;
<span class="o">(</span>gdb<span class="o">)</span> run arg1 arg2
</pre></div>
</div>
<p>Arg1 and arg2 will be remembered and used when you run again. If you want to reset or clear the arguments, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">set</span> args &lt;arg1/arg2/.../or none to clear saved args&gt;
</pre></div>
</div>
<p>If your program is already running, you can still use gdb to debug it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gdb &lt;name-of-executable&gt; &lt;process-id&gt;
</pre></div>
</div>
<p>Or you can use the attach command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gdb
<span class="o">(</span>gdb<span class="o">)</span> attach &lt;process-id&gt;
</pre></div>
</div>
<ul class="simple">
<li>Using breakpoints and watchpoints</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> &lt;<span class="k">function</span>-name&gt; <span class="c1"># set break point by function name</span>
<span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> &lt;line-number&gt;
<span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> &lt;file-name:line-number&gt;
<span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> &lt;virtual-memory-address&gt;
<span class="o">(</span>gdb<span class="o">)</span> <span class="nb">break</span> &lt;place-to-break&gt; <span class="k">if</span> &lt;condition&gt;
<span class="o">(</span>gdb<span class="o">)</span> info breakpoints      <span class="c1"># list all all breakpoints and watchpoints</span>
<span class="o">(</span>gdb<span class="o">)</span> disable n             <span class="c1"># n is the breakpoint/watchpoint identifier number from listed info</span>
<span class="o">(</span>gdb<span class="o">)</span> <span class="nb">enable</span> n
<span class="o">(</span>gdb<span class="o">)</span> clear &lt;<span class="k">function</span>-name&gt;/&lt;line-number&gt;/&lt;file-name:line-number&gt;/&lt;virtual-memory-address&gt;
<span class="o">(</span>gdb<span class="o">)</span> delete &lt;breakpoint-identifier&gt;
<span class="o">(</span>gdb<span class="o">)</span> delete                <span class="c1"># delete all breakpoints</span>
<span class="o">(</span>gdb<span class="o">)</span> <span class="k">continue</span>              <span class="c1"># continue execution from breakpoint</span>
</pre></div>
</div>
<ul class="simple">
<li>Manipulating variables</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>gdb<span class="o">)</span> ptype &lt;var-name&gt;      <span class="c1"># print data type</span>
<span class="o">(</span>gdb<span class="o">)</span> print &lt;var-name&gt;      <span class="c1"># print data value</span>
<span class="o">(</span>gdb<span class="o">)</span> print /FMT &lt;var-name&gt; <span class="c1"># o:octal,x:hex,d:decimal,u:unsigned decimal,t:binary,  f:float,a:address,c:char</span>
<span class="o">(</span>gdb<span class="o">)</span> <span class="nb">set</span> &lt;var-name&gt; <span class="o">=</span> &lt;new-value&gt;
<span class="o">(</span>gdb<span class="o">)</span> print &lt;var-name&gt; <span class="o">=</span> &lt;new-value&gt;
<span class="o">(</span>gdb<span class="o">)</span> display &lt;var-name&gt;/&lt;expression&gt;   <span class="c1"># automatically display specified var once program is stopped</span>
<span class="o">(</span>gdb<span class="o">)</span> info display          <span class="c1"># print the list of auto-display items</span>
<span class="o">(</span>gdb<span class="o">)</span> enable/disable &lt;display-item-num&gt; <span class="c1"># enable or disable the display a var/exp</span>
<span class="o">(</span>gdb<span class="o">)</span> undisplay             <span class="c1"># delete the item from display list</span>
</pre></div>
</div>
<ul class="simple">
<li>Stepping and resuming program</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>gdb<span class="o">)</span> step                  <span class="c1"># step by line</span>
<span class="o">(</span>gdb<span class="o">)</span> istep                 <span class="c1"># step by instruction</span>
<span class="o">(</span>gdb<span class="o">)</span> next                  <span class="c1"># continue to next line in current stack frame (including function)</span>
<span class="o">(</span>gdb<span class="o">)</span> <span class="k">continue</span>
<span class="o">(</span>gdb<span class="o">)</span> where                 <span class="c1"># show current line number</span>
<span class="o">(</span>gdb<span class="o">)</span> list &lt;none&gt;/&lt;line-num&gt;/&lt;range&gt;/&lt;<span class="k">function</span>-name&gt;/&lt;*address&gt;
</pre></div>
</div>
<ul class="simple">
<li>Checking stack and stack frames</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>gdb<span class="o">)</span> backtrace             <span class="c1"># display the current stack status</span>
<span class="o">(</span>gdb<span class="o">)</span> frame                 <span class="c1"># show current stack frame</span>
<span class="o">(</span>gdb<span class="o">)</span> frame &lt;frame-num&gt;     <span class="c1"># switch to frame &lt;frame-num&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using GDB Debugger</a><ul>
<li><a class="reference internal" href="#background-knowledge">Background Knowledge</a></li>
<li><a class="reference internal" href="#frequently-used-commands">Frequently Used Commands</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <!-- <li class="nav-item nav-item-0"><a href="../../../index.html">RDU-Wiki 1.0 documentation</a> &raquo;</li> -->
        <li class="nav-item nav-item-0"><a href="../../../index.html">Main Page</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, Ruixiang Du.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.7.
    </div>
  </body>
</html>